<?lu
    header("content-type", "application/json")
    local now = os.time()
    local time = tonumber(query.time or 0)
    if not time or not query.signature or (now - time) > 60 then
        header("400 Bad request")
        | expired or bad request
        return
    end
    local expected = codec.hex_encode(crypto.hmac_sha256(query.time, RELEASE_SALT))
    if expected:lower() ~= query.signature:lower() then
        header("401 Unauthorized")
        | invalid token
        return
    end
    local result = await(crymp.api:updateReleases())
    | ok
?>